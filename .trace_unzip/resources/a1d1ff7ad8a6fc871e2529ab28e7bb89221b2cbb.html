<!DOCTYPE html>
<html lang="en-US">
  <head>
    <!-- Meta tags -->
    <title>Tesora</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta charset="utf-8" />
    <meta name="locale" content="en-US" />
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=2.0, user-scalable=yes"
    />
    <link
      rel="icon"
      type="image/x-icon"
      href="https://cert.tesorabcp.com/assets/icons/favicon.ico"
    />
    <!-- Script de Tag Manager -->
    <script>
      (function (w, d, s, l, i) {
        w[l] = w[l] || [];
        w[l].push({
          "gtm.start": new Date().getTime(),
          event: "gtm.js",
        });
        var f = d.getElementsByTagName(s)[0],
          j = d.createElement(s),
          dl = l != "dataLayer" ? "&l=" + l : "";
        j.async = true;
        j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
        f.parentNode.insertBefore(j, f);
      })(window, document, "script", "dataLayer", "GTM-M9B6B5H3");
    </script>

    <!-- Script para eventos personalizados -->
    <script>
      // Enviar evento de vista de página de login
      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event: 'virtualEvent',
        accion: 'login_page_view',
        pantalla: 'login',
        user_id: 'login'
      });

      // Función para observar cambios en el DOM y detectar los botones
      function observeButtons() {
        const observer = new MutationObserver(function(mutations) {
          mutations.forEach(function(mutation) {
            if (mutation.addedNodes.length) {
              // Detectar botón de login
              const loginButton = document.querySelector('button#next[type="submit"]');
              if (loginButton && !loginButton.dataset.eventAttached) {
                loginButton.dataset.eventAttached = 'true';
                loginButton.addEventListener('click', function() {
                  window.dataLayer.push({
                    event: 'virtualEvent',
                    accion: 'login_button_click',
                    pantalla: 'login',
                    user_id: 'login'
                  });
                });
              }

              // Detectar enlace de olvidaste contraseña
              const forgotPasswordLink = document.querySelector('a#forgotPassword');
              if (forgotPasswordLink && !forgotPasswordLink.dataset.eventAttached) {
                forgotPasswordLink.dataset.eventAttached = 'true';
                forgotPasswordLink.addEventListener('click', function() {
                  window.dataLayer.push({
                    event: 'virtualEvent',
                    accion: 'forgot_password_click',
                    pantalla: 'login',
                    user_id: 'login'
                  });
                });
              }
            }
          });
        });

        // Observar el contenedor donde Azure B2C inyecta el formulario
        const targetNode = document.getElementById('api');
        observer.observe(targetNode, { 
          childList: true, 
          subtree: true 
        });
      }

      // Iniciar la observación cuando el DOM esté listo
      document.addEventListener('DOMContentLoaded', observeButtons);
    </script>

    <!-- Estilos del header -->
    <style>
      .header {
        height: 72px;
        border-bottom: 1px solid #e0e0e0;
        width: 100%;
        padding: 8px 32px;
        background-color: white;
        display: flex;
        align-items: center;
      }

      body,
      input,
      h1,
      h2,
      label,
      button,
      select,
      textarea {
        font-family: "Flexo", sans-serif;
      }

      h1 {
        color: #002a8d;
        margin: 0rem 0rem 0.5rem 0rem;
      }

      h2 {
        color: #606c7f;
        font-size: 17px;
        font-weight: 400;
        margin: 0rem 0rem 2.5rem 0rem;
      }

      body {
        display: flex;
        flex-direction: column;
        margin: 0;
        padding: 0;
        overflow-x: hidden;
        background-color: white;
      }

      input[type="email"],
      input[type="password"],
      input[type="text"] {
        border-radius: 0.5rem;
        height: 48px;
        width: 100%;
        border: 1px solid #d1d5db;
        padding: 0.75rem;
        margin-bottom: 1rem;
        box-sizing: border-box;
      }

      input[type="email"] {
        margin-bottom: 1.5rem;
      }

      button#next {
        width: 100%;
        height: 40px;
        background-color: #ff7800;
        color: white;
        cursor: pointer;
        font-size: 16px;
        border-radius: 20px;
        border: none;
        font-weight: 500;
        margin-top: 2.5rem;
      }

      .header__logo {
        width: 81.34px;
        height: 32px;
        cursor: pointer;
      }

      .login-container {
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        padding: 2.5rem;
        gap: 7rem;
        height: 100%;
        height: calc(90vh - 72px);
      }

      .login-form-container {
        width: 480px;
      }

      .login-image-container {
        display: flex;
        align-items: center;
        height: 100%;
      }

      .login-image {
        height: 100%;
        width: 100%;
      }

      .form-container {
        width: 100%;
        max-width: 400px;
      }

      .api_container {
        padding-top: 0;
        margin-top: 0;
      }

      div#background_branding_container {
        display: none;
      }

      .error.itemLevel {
        color: #e30425;
        font-size: 0.75rem;
      }

      .error p {
        color: #e30425;
        font-size: 0.75rem;
      }

      .highlightError {
        border: 1px solid #e30425;
      }
    </style>
  </head>
  <body>
        <div class="header">
      <a href="https://cert.tesorabcp.com">
        <img
          id="tesora-logo"
          src="https://cert.tesorabcp.com/assets/images/logos/logo-tesora-dark.svg"
          alt="Tesora Logo"
          class="header__logo"
        />
      </a>
    </div>

    <div class="login-container">
      <!-- Columna izquierda - Formulario -->
      <div class="login-form-container">
        <div class="form-container">
          <!-- Contenedor para que Azure B2C inyecte el formulario -->
          <div id="api" role="main"></div>
        </div>
      </div>

      <!-- Columna derecha - Imagen -->
      <div class="login-image-container">
        <img
          class="login-image"
          id="tesora-logo"
          src="https://cert.tesorabcp.com/assets/images/auth/sign-in.svg"
          alt="Tesora Logo"
        />
      </div>
    </div>

    <!-- Estructura original de Azure B2C (oculta) -->
    <div
      id="background_branding_container"
      data-tenant-branding-background-color="true"
      style="display: none"
    >
      <img
        id="background_background_image"
        class="fixed-size"
        data-tenant-branding-background="true"
        src="https://cert.tesorabcp.com/assets/images/auth/sign-in.svg"
        alt="Illustration"
        aria-hidden="true"
      />
    </div>
    <noscript
      ><iframe
        src="https://www.googletagmanager.com/ns.html?id=GTM-M9B6B5H3"
        height="0"
        width="0"
        style="display: none; visibility: hidden"
        title="Google Tag Manager"
      ></iframe
    ></noscript>
  </body>
</html>
